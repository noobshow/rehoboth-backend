window.Echo.private("optimus-pro.signals").listenToAll((h,y)=>{if(console.log(h),h.includes("OptimusSignalUpdated")&&document.getElementById("optimus_pro_signals")){const{signals:r}=y;r.forEach(d=>{const{asset:_,asset_clr:i,range:m,fundamental:p,fundamental_clr:c,technical:a,technical_clr:s,sentiment:e,sentiment_clr:t,strategy:o,strategy_clr:n,volt:w,volt_clr:l}=d,u=_.toLowerCase();document.getElementById(`optimus_pro_signal_${u}_progress`).style.backgroundColor=i,document.getElementById(`optimus_pro_signal_${u}_range`).innerText=m;const g=document.getElementById(`optimus_pro_signal_${u}_fundamental`);g.innerText=p,g.style.color=c;const v=document.getElementById(`optimus_pro_signal_${u}_technical`);v.innerText=a,v.style.color=s;const S=document.getElementById(`optimus_pro_signal_${u}_sentiment`);S.innerText=e,S.style.color=t;const q=document.getElementById(`optimus_pro_signal_${u}_strategy`);q.innerText=o,q.style.color=n})}else if(h.includes("TradeBlotterUpdated")&&document.getElementById("optimus_pro_trade_blotters")){const r=document.getElementById("optimus_pro_trade_blotters"),d=document.getElementById("optimus_pro_trade_blotters_placeholder");for(;r.childElementCount>1;)r.removeChild(r.lastChild);const{signals:_}=y;_.forEach(i=>{const{id:m,asset:p,time:c,size:a,price:s,sl:e,tp:t,pl:o,size_clr:n,pl_clr:w}=i,l=d.cloneNode(!0);l.classList.remove("d-none"),l.querySelector("#placeholder_trade_blotters_asset").innerText=p,l.querySelector("#placeholder_trade_blotters_time").innerText=c,l.querySelector("#placeholder_trade_blotters_size").innerText=a,l.querySelector("#placeholder_trade_blotters_size").style.color=n,l.querySelector("#placeholder_trade_blotters_price").innerText=s,l.querySelector("#placeholder_trade_blotters_sl").innerText=e,l.querySelector("#placeholder_trade_blotters_tp").innerText=t,l.querySelector("#placeholder_trade_blotters_pl").innerText=o,l.querySelector("#placeholder_trade_blotters_pl").style.color=w,l.removeAttribute("id"),l.querySelectorAll("*").forEach(g=>{g.removeAttribute("id")}),r.appendChild(l)})}else if(h.includes("NewsDataUpdated")&&document.getElementById("optimus_pro_news_data")){const r=document.getElementById("optimus_pro_news_data"),d=document.getElementById("optimus_pro_news_data_placeholder");for(;r.childElementCount>1;)r.removeChild(r.lastChild);const{signals:_}=y;_.forEach(i=>{const{time:m,pair:p,impact:c,event:a,actual:s,forecast:e,previous:t}=i,o=d.cloneNode(!0);o.classList.remove("d-none"),o.querySelector("#placeholder_news_data_time").innerText=m,o.querySelector("#placeholder_news_data_event").innerText=a,o.querySelector("#placeholder_news_data_actual").innerText=s||"-",o.querySelector("#placeholder_news_data_forecast").innerText=e,o.querySelector("#placeholder_news_data_previous").innerText=t;const n=o.querySelector("#placeholder_news_data_impact");c==3?n.classList.add("text-danger"):c==2?n.classList.add("text-warning"):c==1?n.classList.add("text-success"):n.classList.add("text-muted"),o.removeAttribute("id"),o.querySelectorAll("*").forEach(l=>{l.removeAttribute("id")}),r.appendChild(o)}),$('[data-toggle="tooltip"]').tooltip()}else if(h.includes("CDLSignalUpdated")&&document.getElementById("optimus_pro_candle")){const r=document.getElementById("optimus_pro_candle"),d=document.getElementById("optimus_pro_candle_placeholder");for(;r.childElementCount>1;)r.removeChild(r.lastChild);const{signals:_}=y;_.forEach(c=>{const{cdl:a,cdl_clr:s}=c;if(!a)return;const e=d.cloneNode(!0);e.classList.remove("d-none"),e.querySelector("#optimus_pro_candle_asset").innerText=a,e.querySelector("#optimus_pro_candle_td").style.color=s;const t=e.querySelector("#optimus_pro_candle_signal_text");s=="crimson"?(t.querySelector(".is-bearish").classList.remove("d-none"),t.querySelector(".is-bullish").remove()):s=="forestgreen"&&(t.querySelector(".is-bullish").classList.remove("d-none"),t.querySelector(".is-bearish").remove()),e.removeAttribute("id"),e.querySelectorAll("*").forEach(n=>{n.removeAttribute("id")}),r.appendChild(e)});const i=document.getElementById("optimus_pro_investors"),m=document.getElementById("optimus_pro_investors_placeholder");for(;i.childElementCount>1;)i.removeChild(i.lastChild);const{signals:p}=y;p.forEach(c=>{const{bias:a,bias_clr:s}=c;if(!s)return;const e=m.cloneNode(!0);e.classList.remove("d-none"),e.querySelector("#optimus_pro_investors_asset").innerText=a,e.querySelector("#optimus_pro_investors_td").style.color=s;const t=e.querySelector("#optimus_pro_investors_signal_text");s=="lightsalmon"?(t.querySelector(".is-bearish").classList.remove("d-none"),t.querySelector(".is-bullish").remove(),t.querySelector(".is-neutral").remove()):s=="chartreuse"&&(t.querySelector(".is-bullish").classList.remove("d-none"),t.querySelector(".is-bearish").remove(),t.querySelector(".is-neutral").remove()),e.removeAttribute("id"),e.querySelectorAll("*").forEach(n=>{n.removeAttribute("id")}),i.appendChild(e)})}});
