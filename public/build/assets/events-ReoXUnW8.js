window.Echo.private("optimus-pro.signals").listenToAll((b,w)=>{if(console.log(b),b.includes("OptimusSignalUpdated")&&document.getElementById("optimus_pro_signals")){const{signals:s}=w;s.forEach(_=>{const{asset:u,asset_clr:i,range:m,fundamental:d,fundamental_clr:a,technical:n,technical_clr:o,sentiment:e,sentiment_clr:r,strategy:t,strategy_clr:c,volt:f,volt_clr:l}=_,p=u.toLowerCase();document.getElementById(`optimus_pro_signal_${p}_progress`).style.backgroundColor=i;const L=document.getElementById(`optimus_pro_signal_${p}_range`);L.innerText=m;const h=document.getElementById(`optimus_pro_signal_${p}_fundamental`);h.innerText=d;const y=document.getElementById(`optimus_pro_signal_${p}_technical`);y.innerText=n;const g=document.getElementById(`optimus_pro_signal_${p}_sentiment`);g.innerText=e;const v=document.getElementById(`optimus_pro_signal_${p}_strategy`);v.innerText=t,m?L.classList.remove("d-none"):L.classList.add("d-none"),d?(h.classList.remove("d-none"),d=="Buy"?(h.classList.add("btn-success"),h.classList.remove("btn-danger")):(h.classList.add("btn-danger"),h.classList.remove("btn-success"))):h.classList.add("d-none"),n?(y.classList.remove("d-none"),n=="Buy"?(y.classList.add("btn-success"),y.classList.remove("btn-danger")):(y.classList.add("btn-danger"),y.classList.remove("btn-success"))):y.classList.add("d-none"),e?(g.classList.remove("d-none"),e=="Buy"?(g.classList.add("btn-success"),g.classList.remove("btn-danger")):(g.classList.add("btn-danger"),g.classList.remove("btn-success"))):g.classList.add("d-none"),t?(v.classList.remove("d-none"),t=="Buy"?(v.classList.add("btn-success"),v.classList.remove("btn-danger")):(v.classList.add("btn-danger"),v.classList.remove("btn-success"))):v.classList.add("d-none")})}else if(b.includes("TradeBlotterUpdated")&&document.getElementById("optimus_pro_trade_blotters")){const s=document.getElementById("optimus_pro_trade_blotters"),_=document.getElementById("optimus_pro_trade_blotters_placeholder");for(;s.childElementCount>1;)s.removeChild(s.lastChild);const{signals:u}=w;u.forEach(i=>{const{id:m,asset:d,time:a,size:n,price:o,sl:e,tp:r,pl:t,size_clr:c,pl_clr:f}=i,l=_.cloneNode(!0);l.classList.remove("d-none"),l.querySelector("#placeholder_trade_blotters_asset").innerText=d,l.querySelector("#placeholder_trade_blotters_time").innerText=a,l.querySelector("#placeholder_trade_blotters_size").innerText=n,l.querySelector("#placeholder_trade_blotters_size").style.color=c,l.querySelector("#placeholder_trade_blotters_price").innerText=o,l.querySelector("#placeholder_trade_blotters_sl").innerText=e,l.querySelector("#placeholder_trade_blotters_tp").innerText=r,l.querySelector("#placeholder_trade_blotters_pl").innerText=t,l.querySelector("#placeholder_trade_blotters_pl").style.color=f,l.removeAttribute("id"),l.querySelectorAll("*").forEach(L=>{L.removeAttribute("id")}),s.appendChild(l)})}else if(b.includes("NewsDataUpdated")&&document.getElementById("optimus_pro_news_data")){const s=document.getElementById("optimus_pro_news_data"),_=document.getElementById("optimus_pro_news_data_placeholder");for(;s.childElementCount>1;)s.removeChild(s.lastChild);const{signals:u}=w;u.forEach(i=>{const{time:m,pair:d,impact:a,event:n,actual:o,forecast:e,previous:r}=i,t=_.cloneNode(!0);t.classList.remove("d-none"),t.querySelector("#placeholder_news_data_time").innerText=m,t.querySelector("#placeholder_news_data_event").innerText=n,t.querySelector("#placeholder_news_data_actual").innerText=o||"-",t.querySelector("#placeholder_news_data_forecast").innerText=e,t.querySelector("#placeholder_news_data_previous").innerText=r;const c=t.querySelector("#placeholder_news_data_impact");a==3?c.classList.add("text-danger"):a==2?c.classList.add("text-warning"):a==1?c.classList.add("text-success"):c.classList.add("text-muted"),t.removeAttribute("id"),t.querySelectorAll("*").forEach(l=>{l.removeAttribute("id")}),s.appendChild(t)}),$('[data-toggle="tooltip"]').tooltip()}else if(b.includes("CDLSignalUpdated")&&document.getElementById("optimus_pro_candle")){const s=document.getElementById("optimus_pro_candle"),_=document.getElementById("optimus_pro_candle_placeholder");for(;s.childElementCount>1;)s.removeChild(s.lastChild);const{signals:u}=w;u.forEach(a=>{const{cdl:n,cdl_clr:o}=a;if(!n)return;const e=_.cloneNode(!0);e.classList.remove("d-none"),e.querySelector("#optimus_pro_candle_asset").innerText=n,e.querySelector("#optimus_pro_candle_td").style.color=o;const r=e.querySelector("#optimus_pro_candle_signal_text");o=="crimson"?(r.querySelector(".is-bearish").classList.remove("d-none"),r.querySelector(".is-bullish").remove()):o=="forestgreen"&&(r.querySelector(".is-bullish").classList.remove("d-none"),r.querySelector(".is-bearish").remove()),e.removeAttribute("id"),e.querySelectorAll("*").forEach(c=>{c.removeAttribute("id")}),s.appendChild(e)});const i=document.getElementById("optimus_pro_investors"),m=document.getElementById("optimus_pro_investors_placeholder");for(;i.childElementCount>1;)i.removeChild(i.lastChild);const{signals:d}=w;d.forEach(a=>{const{bias:n,bias_clr:o}=a;if(!o)return;const e=m.cloneNode(!0);e.classList.remove("d-none"),e.querySelector("#optimus_pro_investors_asset").innerText=n,e.querySelector("#optimus_pro_investors_td").style.color=o;const r=e.querySelector("#optimus_pro_investors_signal_text");o=="lightsalmon"?(r.querySelector(".is-bearish").classList.remove("d-none"),r.querySelector(".is-bullish").remove(),r.querySelector(".is-neutral").remove()):o=="chartreuse"&&(r.querySelector(".is-bullish").classList.remove("d-none"),r.querySelector(".is-bearish").remove(),r.querySelector(".is-neutral").remove()),e.removeAttribute("id"),e.querySelectorAll("*").forEach(c=>{c.removeAttribute("id")}),i.appendChild(e)})}});
