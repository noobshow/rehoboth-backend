window.Echo.private("optimus-pro.signals").listenToAll((b,w)=>{if(console.log(b),b.includes("OptimusSignalUpdated")&&document.getElementById("optimus_pro_signals")){const{signals:s}=w;s.forEach(_=>{const{asset:m,asset_clr:a,range:u,fundamental:d,fundamental_clr:c,technical:n,technical_clr:o,sentiment:e,sentiment_clr:r,strategy:t,strategy_clr:i,volt:f,volt_clr:l}=_,p=m.toLowerCase();document.getElementById(`optimus_pro_signal_${p}_progress`).style.backgroundColor=a;const L=document.getElementById(`optimus_pro_signal_${p}_range`);L.innerText=u;const h=document.getElementById(`optimus_pro_signal_${p}_fundamental`);h.innerText=d;const y=document.getElementById(`optimus_pro_signal_${p}_technical`);y.innerText=n;const g=document.getElementById(`optimus_pro_signal_${p}_sentiment`);g.innerText=e;const v=document.getElementById(`optimus_pro_signal_${p}_strategy`);v.innerText=t,u?L.classList.remove("d-none"):L.classList.add("d-none"),d?(h.classList.remove("d-none"),d=="Buy"?(h.classList.add("btn-primary"),h.classList.remove("btn-danger")):(h.classList.add("btn-danger"),h.classList.remove("btn-primary"))):h.classList.add("d-none"),n?(y.classList.remove("d-none"),n=="Buy"?(y.classList.add("btn-primary"),y.classList.remove("btn-danger")):(y.classList.add("btn-danger"),y.classList.remove("btn-primary"))):y.classList.add("d-none"),e?(g.classList.remove("d-none"),e=="Buy"?(g.classList.add("btn-primary"),g.classList.remove("btn-danger")):(g.classList.add("btn-danger"),g.classList.remove("btn-primary"))):g.classList.add("d-none"),t?(v.classList.remove("d-none"),t=="Buy"?(v.classList.add("btn-primary"),v.classList.remove("btn-danger")):(v.classList.add("btn-danger"),v.classList.remove("btn-primary"))):v.classList.add("d-none")})}else if(b.includes("TradeBlotterUpdated")&&document.getElementById("optimus_pro_trade_blotters")){const s=document.getElementById("optimus_pro_trade_blotters"),_=document.getElementById("optimus_pro_trade_blotters_placeholder");for(;s.childElementCount>1;)s.removeChild(s.lastChild);const{signals:m}=w;m.forEach(a=>{const{id:u,asset:d,time:c,size:n,price:o,sl:e,tp:r,pl:t,size_clr:i,pl_clr:f}=a,l=_.cloneNode(!0);l.classList.remove("d-none"),l.querySelector("#placeholder_trade_blotters_asset").innerText=d,l.querySelector("#placeholder_trade_blotters_time").innerText=c,l.querySelector("#placeholder_trade_blotters_size").innerText=n,l.querySelector("#placeholder_trade_blotters_size").style.color=i,l.querySelector("#placeholder_trade_blotters_price").innerText=o,l.querySelector("#placeholder_trade_blotters_sl").innerText=e,l.querySelector("#placeholder_trade_blotters_tp").innerText=r,l.querySelector("#placeholder_trade_blotters_pl").innerText=t,l.querySelector("#placeholder_trade_blotters_pl").style.color=f,l.removeAttribute("id"),l.querySelectorAll("*").forEach(L=>{L.removeAttribute("id")}),s.appendChild(l)})}else if(b.includes("NewsDataUpdated")&&document.getElementById("optimus_pro_news_data")){const s=document.getElementById("optimus_pro_news_data"),_=document.getElementById("optimus_pro_news_data_placeholder");for(;s.childElementCount>1;)s.removeChild(s.lastChild);const{signals:m}=w;m.forEach(a=>{const{time:u,pair:d,impact:c,event:n,actual:o,forecast:e,previous:r}=a,t=_.cloneNode(!0);t.classList.remove("d-none"),t.querySelector("#placeholder_news_data_time").innerText=u,t.querySelector("#placeholder_news_data_event").innerText=n,t.querySelector("#placeholder_news_data_actual").innerText=o||"-",t.querySelector("#placeholder_news_data_forecast").innerText=e,t.querySelector("#placeholder_news_data_previous").innerText=r;const i=t.querySelector("#placeholder_news_data_impact");c==3?i.classList.add("text-danger"):c==2?i.classList.add("text-warning"):c==1?i.classList.add("text-success"):i.classList.add("text-muted"),t.removeAttribute("id"),t.querySelectorAll("*").forEach(l=>{l.removeAttribute("id")}),s.appendChild(t)}),$('[data-toggle="tooltip"]').tooltip()}else if(b.includes("CDLSignalUpdated")&&document.getElementById("optimus_pro_candle")){const s=document.getElementById("optimus_pro_candle"),_=document.getElementById("optimus_pro_candle_placeholder");for(;s.childElementCount>1;)s.removeChild(s.lastChild);const{signals:m}=w;m.forEach(c=>{const{cdl:n,cdl_clr:o}=c;if(!n)return;const e=_.cloneNode(!0);e.classList.remove("d-none"),e.querySelector("#optimus_pro_candle_asset").innerText=n,e.querySelector("#optimus_pro_candle_td").style.color=o;const r=e.querySelector("#optimus_pro_candle_signal_text");o=="crimson"?(r.querySelector(".is-bearish").classList.remove("d-none"),r.querySelector(".is-bullish").remove()):o=="forestgreen"&&(r.querySelector(".is-bullish").classList.remove("d-none"),r.querySelector(".is-bearish").remove()),e.removeAttribute("id"),e.querySelectorAll("*").forEach(i=>{i.removeAttribute("id")}),s.appendChild(e)});const a=document.getElementById("optimus_pro_investors"),u=document.getElementById("optimus_pro_investors_placeholder");for(;a.childElementCount>1;)a.removeChild(a.lastChild);const{signals:d}=w;d.forEach(c=>{const{bias:n,bias_clr:o}=c;if(!o)return;const e=u.cloneNode(!0);e.classList.remove("d-none"),e.querySelector("#optimus_pro_investors_asset").innerText=n,e.querySelector("#optimus_pro_investors_td").style.color=o;const r=e.querySelector("#optimus_pro_investors_signal_text");o=="lightsalmon"?(r.querySelector(".is-bearish").classList.remove("d-none"),r.querySelector(".is-bullish").remove(),r.querySelector(".is-neutral").remove()):o=="chartreuse"&&(r.querySelector(".is-bullish").classList.remove("d-none"),r.querySelector(".is-bearish").remove(),r.querySelector(".is-neutral").remove()),e.removeAttribute("id"),e.querySelectorAll("*").forEach(i=>{i.removeAttribute("id")}),a.appendChild(e)})}});
